:root {
    /* Base Theme Variables - Controlled by JS */
    --T_primary: #6750A4;
    --T_onPrimary: #FFFFFF;
    --T_primaryContainer: #EADDFF;
    --T_onPrimaryContainer: #21005D;
    --T_background: #FEF7FF;
    --T_surface: #FEF7FF;
    --T_surfaceContainer: #F3EDF7;

    /* MD3 Colors - Derived from Theme Variables */
    --md-sys-color-primary: var(--T_primary);
    --md-sys-color-on-primary: var(--T_onPrimary);
    --md-sys-color-primary-container: var(--T_primaryContainer);
    --md-sys-color-on-primary-container: var(--T_onPrimaryContainer);

    --md-sys-color-secondary: #625B71;
    --md-sys-color-on-secondary: #FFFFFF;
    --md-sys-color-secondary-container: #E8DEF8;
    --md-sys-color-on-secondary-container: #1D192B;

    --md-sys-color-tertiary: #7D5260;
    --md-sys-color-on-tertiary: #FFFFFF;
    --md-sys-color-tertiary-container: #FFD8E4;
    --md-sys-color-on-tertiary-container: #31111D;

    --md-sys-color-error: #B3261E;

    --md-sys-color-background: var(--T_background);
    --md-sys-color-on-background: #1D1B20;
    --md-sys-color-surface: var(--T_surface);
    --md-sys-color-on-surface: #1D1B20;

    --md-sys-color-surface-variant: var(--T_surfaceContainer);
    --md-sys-color-on-surface-variant: #49454F;
    --md-sys-color-surface-container-lowest: #FFFFFF;
    --md-sys-color-surface-container-low: #F7F2FA;
    --md-sys-color-surface-container: var(--T_surfaceContainer);
    --md-sys-color-surface-container-high: var(--T_surfaceContainer);
    --md-sys-color-surface-container-highest: var(--T_surfaceContainer);
    --md-sys-color-outline: #79747E;

    /* Shapes */
    --md-sys-shape-corner-extra-small: 4px;
    --md-sys-shape-corner-small: 8px;
    --md-sys-shape-corner-medium: 12px;
    --md-sys-shape-corner-large: 16px;
    --md-sys-shape-corner-extra-large: 28px;
    --md-sys-shape-corner-full: 9999px;

    /* Typography */
    --md-sys-typescale-body-large-font: 'Roboto', sans-serif;
    --md-sys-typescale-body-large-line-height: 24px;
    --md-sys-typescale-body-large-size: 16px;
}

@media (prefers-color-scheme: dark) {
    :root {
        /* In dark mode, we let the system colors take over but we still want the T variables for tinting if possible.
           For now, let's just make sure the background mapping isn't hardcoded to a fixed charcoal if T_background is set.
        */
        --md-sys-color-primary: var(--T_primary);
        /* Stay dynamic */
        --md-sys-color-background: #141218;
        /* Default MD3 Dark */
        --md-sys-color-surface: #141218;
        --md-sys-color-on-background: #E6E1E5;
        --md-sys-color-on-surface: #E6E1E5;

        /* If T_background is provided, we can use it as a tint overlay in JS or just let CSS handle it.
           To be safe and responsive, we keep the MD3 dark defaults for core elements.
        */
    }
}

body {
    background-color: var(--md-sys-color-background);
    color: var(--md-sys-color-on-background);
    font-family: 'Roboto', sans-serif;
    margin: 0;
    transition: background-color 0.3s ease;
}

/* Scrollbar */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: transparent;
}

::-webkit-scrollbar-thumb {
    background: var(--md-sys-color-outline);
    border-radius: 4px;
    opacity: 0.5;
}

/* Markdown Content Style Fixes */
.content h1,
.content h2,
.content h3 {
    margin-top: 1.5em;
    /* Add space before headers */
    margin-bottom: 0.5em;
    line-height: 1.3;
}

.content p,
.content li {
    margin-bottom: 8px;
    line-height: 1.5;
    /* Reduced from default/1.6 */
}